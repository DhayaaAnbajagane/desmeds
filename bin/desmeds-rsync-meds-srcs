#!/usr/bin/env python
from argparse import ArgumentParser
import desmeds

parser=ArgumentParser()

parser.add_argument(
    'campaign',
    help='campaign, e.g. "Y3A1_COADD"',
)
parser.add_argument(
    'tilename',
    help='tilename to download',
)
parser.add_argument(
    'band',
    default=None,
    help=('only download files for this band; '
          'only applies to downloading single-epoch data')
)

parser.add_argument(
    '--remove',
    action='store_true',
    help=('remove all download files band'),
)


if __name__ == '__main__':

    args = parser.parse_args()

    sources = desmeds.coaddsrc.CoaddSrc(args.campaign)

    if args.remove:
        sources.remove(args.tilename, args.band)
    else:
        sources.download(args.tilename, args.band)
