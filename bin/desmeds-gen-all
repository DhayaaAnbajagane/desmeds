#!/usr/bin/env python
"""
    %prog [options] medsconf coadd_run band

Generate scripts, idfiles, srclists etc. for a single coadd run and band
"""
from __future__ import print_function
import sys
import os
import desmeds


from optparse import OptionParser
parser=OptionParser(__doc__)

parser.add_option('-c','--check',action='store_true',
                  help="check that files exist")
parser.add_option('--vers',default='work',
                  help="Code version, default %default")



def main():
    options,args = parser.parse_args(sys.argv[1:])

    if len(args) < 3:
        parser.print_help()
        sys.exit(1)


    medsconf=args[0]
    coadd_run=args[1]
    band=args[2]

    gen=desmeds.Generator(medsconf,
                          check=options.check,
                          version=options.vers)

    gen.load_coadd(coadd_run, band)
    gen.write_all()

main()

